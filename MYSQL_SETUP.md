# ORIN - MySQL æ•°æ®æŒä¹…åŒ–é…ç½®å®Œæˆ âœ…

## æ¦‚è¿°

ORIN é¡¹ç›®å·²å®Œå…¨åˆ‡æ¢åˆ° **MySQL æ•°æ®åº“**ï¼Œç¡®ä¿æ‰€æœ‰æ•°æ®æŒä¹…åŒ–å­˜å‚¨ï¼Œé‡å¯åæ•°æ®ä¸ä¼šä¸¢å¤±ã€‚

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. **ç§»é™¤ H2 å†…å­˜æ•°æ®åº“**
- âœ… ä» `pom.xml` ä¸­åˆ é™¤äº† H2 æ•°æ®åº“ä¾èµ–
- âœ… é¡¹ç›®ç°åœ¨åªä½¿ç”¨ MySQL ä½œä¸ºæ•°æ®åº“

### 2. **MySQL é…ç½®**
- âœ… æ•°æ®åº“åç§°: `orindb`
- âœ… å­—ç¬¦é›†: `utf8mb4`
- âœ… è‡ªåŠ¨å»ºè¡¨: JPA `hibernate.ddl-auto=update`
- âœ… å½“å‰æ•°æ®è¡¨: **20 å¼ è¡¨**

### 3. **ç®¡ç†è„šæœ¬å¢å¼º**
`manage.sh` æ–°å¢äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

#### æ–°å¢å‘½ä»¤
```bash
./manage.sh db        # æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€
./manage.sh status    # æŸ¥çœ‹æœåŠ¡å’Œæ•°æ®åº“çŠ¶æ€
```

#### è‡ªåŠ¨æ£€æŸ¥åŠŸèƒ½
- âœ… å¯åŠ¨å‰è‡ªåŠ¨æ£€æŸ¥ MySQL æœåŠ¡
- âœ… è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
- âœ… è‡ªåŠ¨å¯åŠ¨ MySQL æœåŠ¡ï¼ˆå¦‚æœæœªè¿è¡Œï¼‰
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„æ•°æ®åº“çŠ¶æ€ä¿¡æ¯

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

### å¯åŠ¨ç³»ç»Ÿ
```bash
./manage.sh start
```
å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ï¼š
1. æ£€æŸ¥ MySQL æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨
3. å¦‚æœéœ€è¦ï¼Œè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“
4. å¯åŠ¨åç«¯å’Œå‰ç«¯æœåŠ¡

### æŸ¥çœ‹çŠ¶æ€
```bash
./manage.sh status
```
æ˜¾ç¤ºï¼š
- åç«¯æœåŠ¡çŠ¶æ€ (Port 8080)
- å‰ç«¯æœåŠ¡çŠ¶æ€ (Port 5173)
- MySQL æœåŠ¡çŠ¶æ€
- æ•°æ®åº“å­˜åœ¨çŠ¶æ€
- æ•°æ®è¡¨æ•°é‡

### æŸ¥çœ‹æ•°æ®åº“
```bash
./manage.sh db
```
ä»…æ˜¾ç¤ºæ•°æ®åº“ç›¸å…³ä¿¡æ¯

### åœæ­¢ç³»ç»Ÿ
```bash
./manage.sh stop
```

### é‡å¯ç³»ç»Ÿ
```bash
./manage.sh restart
```

## ğŸ”§ æ•°æ®åº“é…ç½®

### é…ç½®æ–‡ä»¶ä½ç½®
`orin-backend/src/main/resources/application.properties`

### å½“å‰é…ç½®
```properties
# æ•°æ®åº“è¿æ¥
spring.datasource.url=jdbc:mysql://localhost:3306/orindb?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=password

# JPA é…ç½®
spring.jpa.hibernate.ddl-auto=update  # è‡ªåŠ¨æ›´æ–°è¡¨ç»“æ„
spring.jpa.show-sql=true              # æ˜¾ç¤º SQL è¯­å¥
```

### ä¿®æ”¹æ•°æ®åº“å¯†ç 
å¦‚æœä½ çš„ MySQL root å¯†ç ä¸æ˜¯ `password`ï¼Œéœ€è¦ä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹ï¼š

1. **application.properties**
```properties
spring.datasource.password=ä½ çš„å¯†ç 
```

2. **manage.sh**
```bash
DB_PASS="ä½ çš„å¯†ç "
```

## ğŸ’¾ æ•°æ®å¤‡ä»½ä¸æ¢å¤

### å¤‡ä»½æ•°æ®åº“
```bash
mysqldump -u root -p orindb > backup_$(date +%Y%m%d_%H%M%S).sql
```

### æ¢å¤æ•°æ®åº“
```bash
mysql -u root -p orindb < backup_20260115_134255.sql
```

### æŸ¥çœ‹æ•°æ®åº“
```bash
mysql -u root -p orindb
```

## ğŸ“Š å½“å‰æ•°æ®åº“çŠ¶æ€

```
MySQL æœåŠ¡: âœ… è¿è¡Œä¸­
æ•°æ®åº“ 'orindb': âœ… å­˜åœ¨
æ•°æ®è¡¨æ•°é‡: 20 å¼ 
```

## ğŸ¯ æ•°æ®æŒä¹…æ€§ä¿è¯

âœ… **å®Œå…¨æŒä¹…åŒ–**: æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨ MySQL ä¸­  
âœ… **é‡å¯å®‰å…¨**: åº”ç”¨é‡å¯åæ•°æ®å®Œæ•´ä¿ç•™  
âœ… **è‡ªåŠ¨å»ºè¡¨**: JPA è‡ªåŠ¨åˆ›å»ºå’Œæ›´æ–°è¡¨ç»“æ„  
âœ… **å­—ç¬¦é›†æ”¯æŒ**: å®Œæ•´æ”¯æŒä¸­æ–‡å’Œ emoji  
âœ… **äº‹åŠ¡æ”¯æŒ**: MySQL InnoDB å¼•æ“æä¾› ACID ä¿è¯  

## ğŸ“ ç›¸å…³æ–‡ä»¶

- `manage.sh` - ç³»ç»Ÿç®¡ç†è„šæœ¬ï¼ˆå·²æ›´æ–°ï¼‰
- `DATABASE.md` - æ•°æ®åº“è¯¦ç»†é…ç½®æ–‡æ¡£
- `orin-backend/src/main/resources/db/init.sql` - æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- `orin-backend/src/main/resources/application.properties` - æ•°æ®åº“é…ç½®

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. ç¡®ä¿ MySQL å·²å®‰è£…
brew install mysql

# 2. å¯åŠ¨ç³»ç»Ÿï¼ˆè‡ªåŠ¨æ£€æŸ¥å’Œé…ç½®æ•°æ®åº“ï¼‰
./manage.sh start

# 3. æŸ¥çœ‹çŠ¶æ€
./manage.sh status

# 4. è®¿é—®åº”ç”¨
open http://localhost:5173
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡å¯åŠ¨**: é¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“å’Œè¡¨ç»“æ„
2. **æ•°æ®è¿ç§»**: å¦‚æœä¹‹å‰ä½¿ç”¨ H2ï¼Œæ•°æ®éœ€è¦æ‰‹åŠ¨è¿ç§»
3. **å¯†ç é…ç½®**: ç¡®ä¿ `application.properties` å’Œ `manage.sh` ä¸­çš„å¯†ç ä¸€è‡´
4. **ç«¯å£å ç”¨**: ç¡®ä¿ MySQL é»˜è®¤ç«¯å£ 3306 æœªè¢«å ç”¨

## ğŸ‰ å®Œæˆï¼

ä½ çš„ ORIN é¡¹ç›®ç°åœ¨å·²ç»å®Œå…¨ä½¿ç”¨ MySQL æ•°æ®åº“ï¼Œæ•°æ®æŒä¹…æ€§å¾—åˆ°å®Œå…¨ä¿è¯ï¼
