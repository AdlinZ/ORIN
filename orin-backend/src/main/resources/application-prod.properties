# Production Environment Configuration
# This configuration is for production deployment
# ALL sensitive values MUST be provided via environment variables

# Database Configuration (Production)
# REQUIRED: DB_HOST, DB_PORT, DB_NAME, DB_USERNAME, DB_PASSWORD must be set
spring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}?useSSL=true&requireSSL=true&serverTimezone=UTC
spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# JPA / Hibernate (Production - VALIDATE ONLY, no auto-schema changes)
spring.jpa.show-sql=false
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.format_sql=false

# Connection Pool (Production optimized)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# Logging (Production - minimal logging)
logging.level.root=WARN
logging.level.com.adlin.orin=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate=WARN

# Redis Configuration (Production)
# REQUIRED: REDIS_HOST, REDIS_PORT must be set
spring.data.redis.host=${REDIS_HOST}
spring.data.redis.port=${REDIS_PORT}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=60000
spring.data.redis.jedis.pool.max-active=20
spring.data.redis.jedis.pool.max-idle=10
spring.data.redis.jedis.pool.min-idle=5

# Dify Integration Configuration (Production)
dify.api.timeout=${DIFY_API_TIMEOUT:30000}
dify.default.endpoint=${DIFY_DEFAULT_ENDPOINT}
dify.health.check.interval=${DIFY_HEALTH_CHECK_INTERVAL:60000}

# JWT Configuration (Production)
# REQUIRED: JWT_SECRET must be set (minimum 256 bits)
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Rate Limiting (Production - strict)
rate.limit.requests=${RATE_LIMIT_REQUESTS:100}
rate.limit.period=${RATE_LIMIT_PERIOD:60}

# Actuator Configuration (Production - limited exposure)
management.endpoints.web.exposure.include=health,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.endpoint.loggers.enabled=false
management.metrics.export.prometheus.enabled=true

# Security Headers
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=strict

# Error Handling (Production - hide details)
server.error.include-message=never
server.error.include-binding-errors=never
server.error.include-stacktrace=never
server.error.include-exception=false
